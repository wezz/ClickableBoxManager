(function(l,i){typeof exports=="object"&&typeof module<"u"?module.exports=i():typeof define=="function"&&define.amd?define(i):(l=typeof globalThis<"u"?globalThis:l||self,l.clickableboxmanager=i())})(this,function(){"use strict";var a=Object.defineProperty;var u=(l,i,e)=>i in l?a(l,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[i]=e;var c=(l,i,e)=>(u(l,typeof i!="symbol"?i+"":i,e),e);class l{constructor(e=document){c(this,"controlelements",[]);c(this,"controlselector","[data-clickable-box]");this.InitiateElements(e),window.addEventListener("global-markupchange",n=>{var t;this.InitiateElements(((t=n==null?void 0:n.detail)==null?void 0:t.target)??document)})}InitiateElements(e=document){const t=[].slice.call(e.querySelectorAll(this.controlselector)).filter(r=>r.clickablebox!=="activated");t.forEach(r=>{this.InitiateElement(r)}),this.controlelements=[].concat(this.controlelements,t)}InitiateElement(e){if(e.clickablebox==="activated")return;e.clickablebox="activated";const n=(e.getAttribute("data-clickable-box")||"cta-button__link primary btn-primary").split(" "),t=this.GetPrimaryLink(e,n);t&&this.AddLinkToBlock(e,t)}GetPrimaryLink(e,n=[]){const t=Array.prototype.slice.call(e.querySelectorAll("a"));if(t.length===0)return null;if(t.length===1)return t[0];const r=n.map(o=>t.filter(s=>s.classList.contains(o))).filter(o=>o.length>0);return r.length>0&&r[0][0]?r[0][0]:t[0]}AddLinkToBlock(e,n){const t=document.createElement("a");["href","target","rel"].forEach(o=>{n.hasAttribute(o)&&t.setAttribute(o,n.getAttribute(o)??"")}),t.setAttribute("data-clickable-box-link","true"),t.setAttribute("role","presentation"),t.setAttribute("title",n.innerText),t.setAttribute("aria-label",n.innerText),t.innerHTML=`<span>${n.innerText}</span>`,e.appendChild(t)}}return l});
