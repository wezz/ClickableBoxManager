(function(l,n){typeof exports=="object"&&typeof module<"u"?module.exports=n():typeof define=="function"&&define.amd?define(n):(l=typeof globalThis<"u"?globalThis:l||self,l.clickableboxmanager=n())})(this,function(){"use strict";var s=Object.defineProperty;var d=(l,n,e)=>n in l?s(l,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[n]=e;var o=(l,n,e)=>(d(l,typeof n!="symbol"?n+"":n,e),e);class l{constructor(e=document){o(this,"controlelements",[]);o(this,"controlselector","[data-clickable-box]");this.InitiateElements(e),window.addEventListener("global-markupchange",i=>{var t;this.InitiateElements(((t=i==null?void 0:i.detail)==null?void 0:t.target)??document)})}InitiateElements(e=document){const t=[].slice.call(e.querySelectorAll(this.controlselector)).filter(c=>c.clickablebox!=="activated");t.forEach(c=>{this.InitiateElement(c)}),this.controlelements=[].concat(this.controlelements,t)}InitiateElement(e){if(e.clickablebox==="activated")return;e.clickablebox="activated";const i=(e.getAttribute("data-clickable-box")||"cta-button__link primary btn-primary").split(" "),t=this.GetPrimaryLink(e,i);t&&this.AddLinkToBlock(e,t)}GetPrimaryLink(e,i=[]){const t=Array.prototype.slice.call(e.querySelectorAll("a"));if(t.length===0)return null;if(t.length===1)return t[0];const c=i.map(r=>t.filter(a=>a.classList.contains(r))).filter(r=>r.length>0);return c.length>0&&c[0][0]?c[0][0]:t[0]}AddLinkToBlock(e,i){const t=document.createElement("div");t.setAttribute("data-clickable-box-link","true"),t.setAttribute("aria-hidden","true"),t.setAttribute("tab-index","-1"),t.setAttribute("aria-label",i.innerText),t.innerHTML=`<span>${i.innerText}</span>`,t.addEventListener("click",()=>{i.click()}),e.appendChild(t)}}return l});
